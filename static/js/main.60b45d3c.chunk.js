(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{161:function(e,t,a){e.exports=a.p+"static/media/LINE@_APP_typeA.60a89fa1.png"},162:function(e,t){e.exports="data:image/png;base64,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"},192:function(e,t,a){e.exports=a(357)},223:function(e,t,a){},357:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(46),r=a.n(i),o=a(21),s=a(22),c=a(24),p=a(23),m=a(25),d=a(372),u=a(371),g=a(159),h=a.n(g),f=a(20),y=a.n(f),v=a(160),A=a.n(v),C=(a(223),a(161)),E=a.n(C),b=a(162),U=a.n(b),w=a(368),k=a(366),I=a(361),x=a(369),B=a(370),j=a(181),O=a(365),S=a(50),Q=a(163),N=a(8),D=a(92),F=a(362),R=a(364),z=a(49),T=a(47),_=a.n(T),M=a(39),H=a.n(M),J="https://nogerm-demo-test.herokuapp.com/",X=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).onTypeChange=function(e,t){var n=t.value;a.setState({type:n},function(){console.log(a.state.type)})},a.handleDeleteClicked=function(e,t){var n=t.value;a.props.deleteCallback(a.props.id,n)},a.handleJSONChange=function(e){console.log("event"+JSON.stringify(e)),"imagemap"===a.state.type&&""!==a.state.fileBaseUrl&&(e.jsObject.baseUrl=a.state.fileBaseUrl),"flex"===a.state.type&&""!==a.state.fileUrl&&(e.jsObject.contents.hero.url=a.state.fileUrl),a.props.contentCallback(a.props.id,e)},a.handleFileChange=function(e){if(console.log(JSON.stringify(e)),console.log("size:"+parseInt(e.size)),parseInt(e.size)<1e3){if(a.setState({file:e,fileUrl:"",filePreviewUrl:"",isuploading:!0}),"image"===a.state.type){var t=J+"image_msg_upload",n={binary:e.base64,folder_name:a.props.path};y.a.post(t,n,{headers:{"content-type":"application/json"}}).then(function(e){console.log("[sendUpdateRequest] success"),alert("\u6a94\u6848\u4e0a\u50b3\u6210\u529f\uff01"),a.setState({fileUrl:e.data.fileUrl,filePreviewUrl:e.data.filePreviewUrl,isuploading:!1},function(){var e={jsObject:{type:"image",originalContentUrl:a.state.fileUrl,previewImageUrl:a.state.filePreviewUrl,animated:!1},error:!1};a.props.contentCallback(a.props.id,e)})}).catch(function(e){console.log("[sendUpdateRequest] error"+e),alert("\u6a94\u6848\u4e0a\u50b3\u5931\u6557\uff0c\u932f\u8aa4\u8a0a\u606f\uff1a"+e)})}else if("imagemap"===a.state.type){var l=J+"imagemap_image_upload",i={binary:e.base64,folder_name:a.props.path};y.a.post(l,i,{headers:{"content-type":"application/json"}}).then(function(e){console.log("[sendUpdateRequest] success"),alert("\u6a94\u6848\u4e0a\u50b3\u6210\u529f\uff01"),a.setState({fileBaseUrl:e.data.file_base_url,thumbHeight:e.data.thumb_height,isuploading:!1})}).catch(function(e){console.log("[sendUpdateRequest] error"+e),alert("\u6a94\u6848\u4e0a\u50b3\u5931\u6557\uff0c\u932f\u8aa4\u8a0a\u606f\uff1a"+e)})}else if("flex"===a.state.type){var r=J+"image_upload",o={binary:e.base64,folder_name:a.props.path};y.a.post(r,o,{headers:{"content-type":"application/json"}}).then(function(e){console.log("[sendUpdateRequest] success"),alert("\u6a94\u6848\u4e0a\u50b3\u6210\u529f\uff01"),a.setState({fileUrl:e.data.fileUrl,isuploading:!1})}).catch(function(e){console.log("[sendUpdateRequest] error"+e),alert("\u6a94\u6848\u4e0a\u50b3\u5931\u6557\uff0c\u932f\u8aa4\u8a0a\u606f\uff1a"+e)})}}else alert("\u6a94\u6848\u8d85\u904e 1Mb!")},a.getTemplateFromType=function(e){return"text"===e?{type:"text",text:"\u60a8\u597d\uff01"}:"image"===e?{type:"image",originalContentUrl:"https://example.com/original.jpg",previewImageUrl:"https://example.com/preview.jpg"}:"video"===e?{type:"video",originalContentUrl:"https://example.com/original.mp4",previewImageUrl:"https://example.com/preview.jpg"}:"audio"===e?{type:"audio",originalContentUrl:"https://example.com/original.m4a",duration:6e4}:"sticker"===e?{type:"sticker",packageId:"1",stickerId:"1"}:"imagemap"===e?{type:"imagemap",baseUrl:"https://example.com/",altText:"This is an imagemap",actions:""}:"location"===e?{type:"location",title:"my location",address:"\u3012150-0002 \u6771\u4eac\u90fd\u6e0b\u8c37\u533a\u6e0b\u8c37\uff12\u4e01\u76ee\uff12\uff11\u2212\uff11",latitude:35.65910807942215,longitude:139.70372892916203}:"confirm"===e?{type:"template",template:""}:"buttons"===e?{type:"template",template:""}:"carousel"===e?{type:"template",template:""}:"flex"===e?{type:"flex",altText:"This is a Flex Message",contents:{type:"bubble",body:{type:"box",layout:"horizontal",contents:[{type:"text",text:"Hello,"},{type:"text",text:"World!"}]}}}:{}},a.renderContent=function(){var e=a.handleJSONChange,t=a.props.defaultContent.type===a.state.type?a.props.defaultContent:a.getTemplateFromType(a.state.type);if("text"===a.state.type||"location"===a.state.type||"confirm"===a.state.type)return l.a.createElement("div",null,l.a.createElement("p",null,"2. \u4f7f\u7528 Bot Designer \u8a2d\u8a08\u597d\u8a0a\u606f"),l.a.createElement("p",null,"3. \u8907\u88fd\u8cbc\u4e0a Bot Designer \u7522\u751f\u7684\u7a0b\u5f0f"),l.a.createElement(z.a,{id:a.props.id,placeholder:t,locale:_.a,height:"110px",onChange:e}));if("sticker"===a.state.type)return l.a.createElement("div",null,l.a.createElement("a",{href:"https://devdocs.line.me/files/sticker_list.pdf",rel:"noopener noreferrer",target:"_blank",title:"\u53ef\u4ee5\u7528\u7684\u8cbc\u5716\u5217\u8868"},"\u53ef\u4ee5\u7528\u7684\u8cbc\u5716\u5217\u8868"),l.a.createElement("p",null,"2. \u4f7f\u7528 Bot Designer \u8a2d\u8a08\u597d\u8a0a\u606f"),l.a.createElement("p",null,"3. \u8907\u88fd\u8cbc\u4e0a Bot Designer \u7522\u751f\u7684\u7a0b\u5f0f"),l.a.createElement(z.a,{id:a.props.id,placeholder:t,locale:_.a,height:"130px",onChange:e}));if("image"===a.state.type){var n=a.state.file.hasOwnProperty("base64")?a.state.file.base64:a.props.defaultContent.hasOwnProperty("previewImageUrl")?a.props.defaultContent.previewImageUrl:"";return l.a.createElement("div",null,l.a.createElement("p",null,"2. \u9078\u64c7\u8981\u4e0a\u50b3\u7684\u5716\u7247 (\u5fc5\u9808\u5c0f\u65bc1Mb)"),l.a.createElement(H.a,{multiple:!1,onDone:a.handleFileChange.bind(Object(N.a)(Object(N.a)(a)))}),l.a.createElement(j.a,{src:n,size:"medium"},l.a.createElement(I.a,{active:a.state.isuploading,inline:!0})))}if("video"===a.state.type)return l.a.createElement("div",null);if("audio"===a.state.type)return l.a.createElement("div",null);if("imagemap"===a.state.type){var i=a.state.file.hasOwnProperty("base64")?a.state.file.base64:a.props.defaultContent.hasOwnProperty("previewImageUrl")?a.props.defaultContent.previewImageUrl:"";return l.a.createElement("div",null,l.a.createElement("p",null,"2. \u9078\u64c7\u8981\u4e0a\u50b3\u7684\u5716\u7247"),l.a.createElement(H.a,{multiple:!1,onDone:a.handleFileChange.bind(Object(N.a)(Object(N.a)(a)))}),l.a.createElement(j.a,{src:i,size:"medium"},l.a.createElement(I.a,{active:a.state.isuploading,inline:!0})),l.a.createElement("div",null,"3. \u8907\u88fd\u8cbc\u4e0a Bot Designer \u7522\u751f\u7684\u7a0b\u5f0f\uff0c",l.a.createElement(D.a,null,"altText"),"\u8f38\u5165\u5728\u4e0d\u652f\u63f4\u7684\u88dd\u7f6e\u4e0a\u8981\u986f\u793a\u7684\u6587\u5b57"),l.a.createElement(z.a,{id:a.props.id,placeholder:t,locale:_.a,height:"150px",onChange:e}))}if("buttons"===a.state.type)return l.a.createElement("div",null);if("carousel"===a.state.type)return l.a.createElement("div",null);if("flex"===a.state.type){var r=a.state.file.hasOwnProperty("base64")?a.state.file.base64:a.props.defaultContent.hasOwnProperty("previewImageUrl")?a.props.defaultContent.previewImageUrl:"";return l.a.createElement("div",null,l.a.createElement("p",null,"2. \u9078\u64c7\u8981\u4e0a\u50b3\u7684\u5716\u7247(\u975e\u5fc5\u8981)"),l.a.createElement(H.a,{multiple:!1,onDone:a.handleFileChange.bind(Object(N.a)(Object(N.a)(a)))}),l.a.createElement(j.a,{src:r,size:"medium"},l.a.createElement(I.a,{active:a.state.isuploading,inline:!0})),l.a.createElement("div",null,"3. \u8907\u88fd\u8cbc\u4e0a Bot Designer \u7522\u751f\u7684\u7a0b\u5f0f\uff0c",l.a.createElement(D.a,null,"altText"),"\u8f38\u5165\u5728\u4e0d\u652f\u63f4\u7684\u88dd\u7f6e\u4e0a\u8981\u986f\u793a\u7684\u6587\u5b57"),l.a.createElement(z.a,{id:a.props.id,placeholder:t,locale:_.a,height:"250px",onChange:e}))}},a.state={type:a.props.type||"",file:{},fileUrl:"",filePreviewUrl:"",fileBaseUrl:"",thumbHeight:"",isuploading:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.renderContent;return l.a.createElement(B.a,{raised:!0},l.a.createElement(x.a,{as:"h3"},"\u8a0a\u606f#",this.props.idx+1,l.a.createElement(O.a,{floated:"right",style:{color:"white",background:"#d32f2f"},onClick:this.handleDeleteClicked},"\u522a\u9664")),l.a.createElement(F.a,null),l.a.createElement("p",null,"1. \u9078\u64c7\u8981\u65b0\u589e\u7684\u8a0a\u606f\u985e\u5225"),l.a.createElement(R.a,{placeholder:"Select message type",options:[{key:"text",text:"\u6587\u5b57",value:"text"},{key:"image",text:"\u5716\u7247",value:"image"},{key:"video",text:"\u5f71\u7247",value:"video"},{key:"audio",text:"\u8a9e\u97f3",value:"audio"},{key:"sticker",text:"\u8cbc\u5716",value:"sticker"},{key:"imagemap",text:"\u5f71\u50cf\u5730\u5716",value:"imagemap"},{key:"location",text:"\u4f4d\u7f6e",value:"location"},{key:"confirm",text:"\u78ba\u8a8d\u7bc4\u672c",value:"confirm"},{key:"buttons",text:"\u6309\u9375\u7bc4\u672c",value:"buttons"},{key:"carousel",text:"\u8f2a\u64ad\u7bc4\u672c",value:"carousel"},{key:"flex",text:"\u81ea\u5b9a\u7fa9",value:"flex"}],selection:!0,defaultValue:this.props.defaultContent.type,onChange:this.onTypeChange,style:{width:"200px"}}),e())}}]),t}(n.Component),q="https://nogerm-demo-test.herokuapp.com/",W=5,P=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).queryReplyMsg=function(){var e=q+a.props.path;y.a.get(e).then(function(e){console.log("[queryReplyMsg] success"+JSON.stringify(e));for(var t=[],n=0;n<e.data.length;n++){var l={_id:e.data[n]._id,content:e.data[n],editContent:""};t.push(l)}a.setState({messageArray:t})}).catch(function(e){console.log("[queryReplyMsg] error"+e)})},a.addReplyMsg=function(){if(a.state.messageArray.length<W){var e={_id:(new Q.a).toHexString(),type:"text",text:""},t={_id:e._id,content:e,editContent:""};a.setState({messageArray:[].concat(Object(S.a)(a.state.messageArray),[t])},function(){console.log("add message: "+JSON.stringify(t))})}},a.handleContentDelete=function(e){var t=Object(S.a)(a.state.messageArray),n=t.findIndex(function(t){return t._id===e});t.splice(n,1),a.setState({messageArray:Object(S.a)(t)},function(){console.log("Delete message id: "+e)})},a.handleContentChange=function(e,t){var n=Object(S.a)(a.state.messageArray),l=n.findIndex(function(t){return t._id===e}),i=n.find(function(t){return t._id===e});i.editContent=t,n.splice(l,1,i),a.setState({messageArray:Object(S.a)(n)})},a.handleSaveClicked=function(){for(var e=!1,t=Object(S.a)(a.state.messageArray),n=[],l=0;l<a.state.messageArray.length;l++){var i=a.state.messageArray[l];""===i.editContent||(!1!==i.editContent.error?e=!0:(i.content=i.editContent.jsObject,t.splice(l,1,i))),n.push(i.content)}a.setState({hasAnyError:e,messageArray:t,isUploading:!0},function(){console.log("Check result has error: "+a.state.hasAnyError),console.log("query array: "+JSON.stringify(n)),a.state.hasAnyError?alert("\u8a0a\u606f\u683c\u5f0f\u932f\u8aa4\uff0c\u8acb\u5148\u4fee\u6b63\u518d\u5132\u5b58"):a.sendUpdateRequest(n)})},a.sendUpdateRequest=function(e){var t=q+a.props.path,n={messages:e};y.a.post(t,n,{headers:{"content-type":"application/json"}}).then(function(e){console.log("[sendUpdateRequest] success"),alert("\u8a0a\u606f\u5132\u5b58\u6210\u529f\uff01"),a.setState({isUploading:!1})}).catch(function(e){console.log("[sendUpdateRequest] error"+e),alert("\u8a0a\u606f\u5132\u5b58\u5931\u6557\uff0c\u932f\u8aa4\u8a0a\u606f\uff1a"+e),a.setState({isUploading:!1})})},a.renderAddMessage=function(){if(a.state.messageArray.length<W)return l.a.createElement(B.a,null,l.a.createElement(O.a,{fluid:!0,onClick:a.addReplyMsg},"\u9ede\u6211\u65b0\u589e\u56de\u61c9\u8a0a\u606f"))},a.state={messageArray:[],hasAnyError:!1,isUploading:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.path!==this.state.path&&(console.log("props change"),this.setState({messageArray:[],hasAnyError:!1},function(){t.queryReplyMsg()}))}},{key:"componentDidMount",value:function(){this.queryReplyMsg()}},{key:"render",value:function(){var e=this.props.path,t=this.state.messageArray,a=this.renderAddMessage,n=this.handleContentChange,i=this.handleContentDelete;return l.a.createElement("div",null,l.a.createElement(x.a,{as:"h1",style:{fontFamily:"Noto Sans TC"}},this.props.title," (\u6700\u591a5\u5247\u8a0a\u606f)"),l.a.createElement("p",{style:{fontFamily:"Noto Sans TC"}},"\u9700\u914d\u5408 Bot designer \u4f7f\u7528"),l.a.createElement("a",{href:"https://developers.line.biz/en/services/bot-designer/",rel:"noopener noreferrer",target:"_blank",title:"Bot designer \u4e0b\u8f09\u9023\u7d50"},"Bot designer \u4e0b\u8f09\u9023\u7d50"),t.map(function(a,r){return l.a.createElement(X,{key:a._id,id:a._id,idx:r,type:a.content.type,defaultContent:t[r].content,path:e,contentCallback:n,deleteCallback:i})}),a(),l.a.createElement(O.a,{floated:"left",style:{color:"white",background:"#00B300"},onClick:this.handleSaveClicked,loading:this.state.isUploading},"\u5132\u5b58"))}}]),t}(n.Component),L="https://nogerm-demo-test.herokuapp.com/",K=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).handleFileChange=function(e){parseInt(e.size)<1e3?a.setState({file:e,fileOk:!0}):alert("\u6a94\u6848\u8d85\u904e 1kb")},a.handleJSONChange=function(e){a.setState({menu:e.jsObject,jsonEdited:!0})},a.createRichMenu=function(){a.setState({isUploading:!0});var e=L+"create_rich_menu_for_all",t={menu:a.state.menu,file_base64:a.state.file.base64,file_size:a.state.file.size,file_type:a.state.file.type};y.a.post(e,t,{headers:{"content-type":"application/json"}}).then(function(e){console.log("[createRichMenu] success"),a.setState({isUploading:!1}),alert("\u4fee\u6539\u5716\u6587\u9078\u55ae\u6210\u529f\uff01")}).catch(function(e){console.log("[createRichMenu] error"+e),a.setState({isUploading:!1}),alert("\u4fee\u6539\u5716\u6587\u9078\u55ae\u5931\u6557\uff0c\u932f\u8aa4\uff1a"+e)})},a.state={menu:{},file:{},richmenuId:"",jsonEdited:!1,fileOk:!1,isUploading:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.jsonEdited,a=e.fileOk,n=this.createRichMenu,i=this.handleJSONChange,r=this.state.file.hasOwnProperty("base64")?this.state.file.base64:"";return l.a.createElement("div",null,l.a.createElement(x.a,{as:"h1",style:{fontFamily:"Noto Sans TC"}},"\u4fee\u6539\u5716\u6587\u9078\u55ae"),l.a.createElement("p",{style:{fontFamily:"Noto Sans TC"}},"\u9700\u914d\u5408 Bot designer \u4f7f\u7528"),l.a.createElement("a",{href:"https://developers.line.biz/en/services/bot-designer/",rel:"noopener noreferrer",target:"_blank",title:"Bot designer \u4e0b\u8f09\u9023\u7d50"},"Bot designer \u4e0b\u8f09\u9023\u7d50"),l.a.createElement("br",null),l.a.createElement(B.a,{raised:!0},l.a.createElement(x.a,{as:"h3"},"\u5716\u6587\u9078\u55ae"),l.a.createElement(F.a,null),l.a.createElement("p",null,"1. \u4f7f\u7528 Bot designer \u8a2d\u8a08\u8981\u7528\u7684\u5716\u6587\u9078\u55ae"),l.a.createElement("p",null,"2. \u8907\u88fd\u8cbc\u4e0a Bot Designer \u7522\u751f\u7684\u7a0b\u5f0f"),l.a.createElement(z.a,{id:this.props.id,placeholder:{text:"\u8907\u88fd\u8cbc\u4e0a Bot Designer \u7522\u751f\u7684\u7a0b\u5f0f"},locale:_.a,height:"300px",onChange:i}),l.a.createElement("p",null,"3. \u9078\u64c7\u5716\u6587\u9078\u55ae\u7684\u80cc\u666f\u5716\u7247\uff08\u5fc5\u9808\u70ba 2500x1686 or 2500x843\uff09"),l.a.createElement("div",{style:{marginLeft:"8px"}},l.a.createElement(H.a,{multiple:!1,onDone:this.handleFileChange.bind(this)}),l.a.createElement(j.a,{src:r,style:{width:"50vw"}})),l.a.createElement("p",null,"4. \u5132\u5b58\u6539\u52d5"),l.a.createElement(O.a,{style:{color:"white",background:"#00B300",margin:"8px"},disabled:!t||!a,onClick:n,loading:this.state.isUploading},"\u5132\u5b58")))}}]),t}(n.Component),Y="https://nogerm-demo-test.herokuapp.com/",G=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).onTypeChange=function(e,t){var n=t.value;a.setState({type:n,file:{},fileUrl:"",filePreviewUrl:"",baseUrl:"",thumbHeight:""},function(){console.log(a.state.type)})},a.handleFileChange=function(e){if(console.log(JSON.stringify(e)),console.log("size:"+parseInt(e.size)),parseInt(e.size)<1e3)if(a.setState({file:e,fileUrl:"",filePreviewUrl:"",isuploading:!0}),"single"===a.state.type){var t=Y+"image_upload",n={binary:e.base64,folder_name:"image_single"};y.a.post(t,n,{headers:{"content-type":"application/json"}}).then(function(e){console.log("[sendUpdateRequest] success"),alert("\u6a94\u6848\u4e0a\u50b3\u6210\u529f\uff01"),a.setState({fileUrl:e.data.fileUrl,isuploading:!1})}).catch(function(e){console.log("[sendUpdateRequest] error"+e),alert("\u6a94\u6848\u4e0a\u50b3\u5931\u6557\uff0c\u932f\u8aa4\u8a0a\u606f\uff1a"+e)})}else if("image"===a.state.type){var l=Y+"image_msg_upload",i={binary:e.base64,folder_name:"image_message"};y.a.post(l,i,{headers:{"content-type":"application/json"}}).then(function(e){console.log("[sendUpdateRequest] success"),alert("\u6a94\u6848\u4e0a\u50b3\u6210\u529f\uff01"),a.setState({fileUrl:e.data.fileUrl,filePreviewUrl:e.data.filePreviewUrl,isuploading:!1})}).catch(function(e){console.log("[sendUpdateRequest] error"+e),alert("\u6a94\u6848\u4e0a\u50b3\u5931\u6557\uff0c\u932f\u8aa4\u8a0a\u606f\uff1a"+e)})}else if("imagemap"===a.state.type){var r=Y+"imagemap_image_upload",o={binary:e.base64,folder_name:"image_imagemap"};y.a.post(r,o,{headers:{"content-type":"application/json"}}).then(function(e){console.log("[sendUpdateRequest] success"),alert("\u6a94\u6848\u4e0a\u50b3\u6210\u529f\uff01"),a.setState({baseUrl:e.data.file_base_url,thumbHeight:e.data.thumb_height,isuploading:!1})}).catch(function(e){console.log("[sendUpdateRequest] error"+e),alert("\u6a94\u6848\u4e0a\u50b3\u5931\u6557\uff0c\u932f\u8aa4\u8a0a\u606f\uff1a"+e)})}},a.renderContent=function(){return"single"===a.state.type?l.a.createElement("div",null,l.a.createElement(D.a,{style:{marginTop:"8px",marginRight:"8px"}},"fileUrl"),a.state.fileUrl):"image"===a.state.type?l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement(D.a,{style:{marginTop:"8px",marginRight:"8px"}},"fileUrl"),a.state.fileUrl),l.a.createElement("div",null,l.a.createElement(D.a,{style:{marginTop:"8px",marginRight:"8px"}},"filePreviewUrl"),a.state.filePreviewUrl)):"imagemap"===a.state.type?l.a.createElement("div",null,l.a.createElement(D.a,{style:{marginTop:"8px",marginRight:"8px"}},"baseUrl"),a.state.baseUrl):void 0},a.state={type:"single",file:{},fileUrl:"",filePreviewUrl:"",baseUrl:"",thumbHeight:"",isuploading:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.file.hasOwnProperty("base64")?this.state.file.base64:"",t=this.renderContent;return l.a.createElement("div",null,l.a.createElement(x.a,{as:"h1",style:{fontFamily:"Noto Sans TC"}},this.props.title),l.a.createElement("p",{style:{fontFamily:"Noto Sans TC"}},"\u4e0a\u50b3\u5716\u7247\u7d66 Bot designer \u4f7f\u7528"),l.a.createElement(B.a,{raised:!0},l.a.createElement("p",null,"1. \u9078\u64c7\u4e0a\u50b3\u985e\u5225"),l.a.createElement(R.a,{placeholder:"Select message type",options:[{key:"single",text:"\u55ae\u5f35\u5716\u7247",value:"single"},{key:"image",text:"\u5716\u7247\u8a0a\u606f",value:"image"},{key:"imagemap",text:"\u5f71\u50cf\u5730\u5716",value:"imagemap"}],selection:!0,defaultValue:this.state.type,onChange:this.onTypeChange,style:{width:"200px"}}),l.a.createElement("p",null,"2. \u9078\u64c7\u8981\u4e0a\u50b3\u7684\u5716\u7247"),l.a.createElement(H.a,{multiple:!1,onDone:this.handleFileChange.bind(this)}),l.a.createElement(j.a,{src:e,size:"medium"},l.a.createElement(I.a,{active:this.state.isuploading,inline:!0})),t()))}}]),t}(n.Component),V=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).handleLoginClicked=function(){var e="https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id=1554176659&redirect_uri=https://nogerm.github.io/church-backend&state=12345&scope=openid%20profile&nonce=54321&max_age="+1800..toString();window.location.href=e},a.handleItemClick=function(e,t){var n=t.name,l=t.path;a.setState({activeItem:l,activeItemName:n})},a.renderBodyContent=function(){var e=a.state,t=e.activeItem,n=e.activeItemName;return"rich_menu"===t?l.a.createElement(K,null):"image_upload"===t?l.a.createElement(G,{title:n}):l.a.createElement(P,{path:t,title:n})},a.renderBody=function(){var e=a.state.activeItem,t=a.state.hasSendRequest,n=a.state.hasLoggedIn,i=a.renderBodyContent;return t&&n?l.a.createElement(w.a.Row,{columns:2},l.a.createElement(w.a.Column,{width:3},l.a.createElement(k.a,{fluid:!0,vertical:!0,tabular:!0,style:{fontFamily:"Noto Sans TC",fontSize:16}},l.a.createElement(k.a.Item,null,l.a.createElement(k.a.Header,{style:{fontSize:24}},"\u5716\u6587\u9078\u55ae"),l.a.createElement(k.a.Menu,null,l.a.createElement(k.a.Item,{name:"\u4fee\u6539\u5716\u6587\u9078\u55ae",active:"rich_menu"===e,path:"rich_menu",onClick:a.handleItemClick}),l.a.createElement(k.a.Item,{name:"\u805a\u6703\u6642\u9593",active:"time_info"===e,path:"time_info",onClick:a.handleItemClick}),l.a.createElement(k.a.Item,{name:"\u4ea4\u901a\u8cc7\u8a0a",active:"traffic_info"===e,path:"traffic_info",onClick:a.handleItemClick}),l.a.createElement(k.a.Item,{name:"\u4e3b\u65e5\u4fe1\u606f\u5f71\u97f3",active:"video_info"===e,path:"video_info",onClick:a.handleItemClick}),l.a.createElement(k.a.Item,{name:"\u5b98\u7db2/FB",active:"web_info"===e,path:"web_info",onClick:a.handleItemClick}),l.a.createElement(k.a.Item,{name:"\u5c0f\u7d44\u805a\u6703\u8cc7\u8a0a",active:"group_info"===e,path:"group_info",onClick:a.handleItemClick}),l.a.createElement(k.a.Item,{name:"\u9031\u5831/News",active:"news_info"===e,path:"news_info",onClick:a.handleItemClick}),l.a.createElement(k.a.Item,{name:"\u52a0\u5165\u597d\u53cb",active:"friend_info"===e,path:"friend_info",onClick:a.handleItemClick}),l.a.createElement(k.a.Item,{name:"\u4eca\u65e5\u8056\u8a00",active:"article_info"===e,path:"article_info",onClick:a.handleItemClick}),l.a.createElement(k.a.Item,{name:"\u6c92\u6709\u95dc\u9375\u5b57\u7684\u56de\u61c9",active:"no_keyword"===e,path:"no_keyword",onClick:a.handleItemClick}))),l.a.createElement(k.a.Item,null,l.a.createElement(k.a.Header,{style:{fontSize:24}},"\u5c0f\u5de5\u5177"),l.a.createElement(k.a.Menu,null,l.a.createElement(k.a.Item,{name:"\u4e0a\u50b3\u5716\u7247",active:"image_upload"===e,path:"image_upload",onClick:a.handleItemClick}))))),l.a.createElement(w.a.Column,{stretched:!0,width:12},i())):t&&!n?l.a.createElement(I.a,{active:!0,inline:"centered"}):l.a.createElement(x.a,{as:"H1",style:{color:"#484848",margin:"auto",fontFamily:"Noto Sans TC"}},"\u8acb\u5148\u767b\u5165")},a.state={activeItem:"time_info",activeItemName:"\u4fee\u6539\u805a\u6703\u6642\u9593",hasSendRequest:!1,hasLoggedIn:!1,userId:"",userName:"\u5c1a\u672a\u767b\u5165",userImageUrl:U.a},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=h.a.parse(this.props.location.search),a=t.code,n=t.state;if(console.log("code: "+a+"\nstate: "+n),void 0!==a){this.setState({hasSendRequest:!0});var l={code:a,state:n};y.a.post("https://nogerm-demo-test.herokuapp.com/login",l,{"Content-Type":"application/json"}).then(function(t){var a=A()(t.data.id_token);console.log("[login]\ndecode: "+JSON.stringify(a)),console.log("[login]\nuser id: "+a.sub+"\nuser name: "+a.name+"\nuser image url: "+a.picture),e.setState({userId:a.sub||"",userName:a.name||"",userImageUrl:a.picture||""},function(){var t=e.state.userId;y.a.get("https://nogerm-demo-test.herokuapp.com/admins").then(function(a){console.log("[get admins] success"+JSON.stringify(a)),void 0===a.data[0].admins.find(function(e){return e===t})?(alert("\u6c92\u6709\u4f7f\u7528\u6b0a\u9650"),e.setState({hasSendRequest:!1})):(alert("\u6b61\u8fce\u767b\u5165\uff0c"+e.state.userName),e.setState({hasLoggedIn:!0}))}).catch(function(e){console.log("[get admins] error"+e)})})}).catch(function(e){console.log("[login] error"+e)})}}},{key:"render",value:function(){var e=this.renderBody,t=this.state.userName,a=this.state.userImageUrl;return l.a.createElement(w.a,null,l.a.createElement(w.a.Row,{columns:1,style:{padding:"0px"}},l.a.createElement(B.a,{raised:!0,style:{background:"#37474f",margin:"0px",flex:1}},l.a.createElement("div",{style:{flexDirection:"row",display:"flex"}},l.a.createElement(j.a,{style:{height:"52px",width:"52px"},src:E.a}),l.a.createElement(x.a,{as:"h1",style:{color:"white",margin:"0px",padding:"8px",flex:1,fontFamily:"Noto Sans TC"}},"\u5d07\u4fe1\u6559\u6703LINE@\u8a2d\u5b9a\u9801"),l.a.createElement(j.a,{avatar:!0,src:a,style:{width:"52px",height:"52px",padding:"8px"}}),l.a.createElement(x.a,{as:"h1",style:{color:"white",margin:"0px",minWidth:"100px",padding:"8px",fontFamily:"Noto Sans TC"}},t),l.a.createElement(O.a,{floated:"right",style:{color:"white",background:"#00B300",margin:"8px"},onClick:this.handleLoginClicked},"LINE LOGIN")))),e())}}]),t}(n.Component),Z=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(d.a,null,l.a.createElement(u.a,{path:"/:code?/:state?",component:V,exact:!0}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=a(363);a(356);r.a.render(l.a.createElement($.a,null,l.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[192,1,2]]]);
//# sourceMappingURL=main.60b45d3c.chunk.js.map