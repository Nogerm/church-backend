(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e){e.exports={name:"church-backend",version:"0.1.0",private:!0,homepage:"https://nogerm.github.io/church-backend",server:"https://nogerm-demo-test.herokuapp.com",line_login_id:"1554176659",dependencies:{axios:"^0.18.0",bson:"^4.0.2","gh-pages":"^2.0.1",highcharts:"^7.1.1","highcharts-react-official":"^2.1.3","jwt-decode":"^2.2.0","query-string":"^6.3.0",react:"^16.8.4","react-dom":"^16.8.4","react-file-base64":"^1.0.3","react-json-editor-ajrm":"^2.5.9","react-router-dom":"^4.3.1","react-scripts":"2.1.8","semantic-ui-css":"^2.4.1","semantic-ui-react":"^0.86.0"},scripts:{start:"react-scripts start",build:"react-scripts build",test:"react-scripts test",eject:"react-scripts eject",predeploy:"npm run build",deploy:"gh-pages -d build"},eslintConfig:{extends:"react-app"},browserslist:[">0.2%","not dead","not ie <= 11","not op_mini all"]}},226:function(e,t,a){e.exports=a.p+"static/media/LINE@_APP_typeA.60a89fa1.png"},227:function(e,t){e.exports="data:image/png;base64,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"},265:function(e,t,a){e.exports=a(457)},296:function(e,t,a){},457:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(64),o=a.n(r),i=a(20),s=a(21),c=a(23),d=a(22),u=a(24),g=a(479),m=a(480),h=a(17),y=a(224),p=a.n(y),f=a(18),v=a.n(f),w=a(225),C=a.n(w),E=(a(296),a(226)),A=a.n(E),b=a(227),k=a.n(b),S=a(474),U=a(472),O=a(466),I=a(473),j=a(475),D=a(254),B=a(158),N=a(465),_=a(121),F=a(118),T=a.n(F),x=a(73),R=a.n(x),M=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleFileChange=function(e){parseInt(e.size)<1e3?a.setState({file:e,fileOk:!0}):alert("\u6a94\u6848\u8d85\u904e 1kb")},a.handleJSONChange=function(e){a.setState({menu:e.jsObject,jsonEdited:!0})},a.createRichMenu=function(){a.setState({isUploading:!0});var e=h.server+"/create_rich_menu_for_all",t={menu:a.state.menu,file_base64:a.state.file.base64,file_size:a.state.file.size,file_type:a.state.file.type};v.a.post(e,t,{headers:{"content-type":"application/json"}}).then(function(e){console.log("[createRichMenu] success"),a.setState({isUploading:!1}),alert("\u65b0\u589e\u5716\u6587\u9078\u55ae\u6210\u529f\uff01")}).catch(function(e){console.log("[createRichMenu] error"+e),a.setState({isUploading:!1}),alert("\u65b0\u589e\u5716\u6587\u9078\u55ae\u5931\u6557\uff0c\u932f\u8aa4\uff1a"+e)})},a.state={menu:{},file:{},richmenuId:"",jsonEdited:!1,fileOk:!1,isUploading:!1},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.jsonEdited,a=e.fileOk,n=this.createRichMenu,r=this.handleJSONChange,o=this.state.file.hasOwnProperty("base64")?this.state.file.base64:"";return l.a.createElement("div",null,l.a.createElement(I.a,{as:"h1",style:{fontFamily:"Noto Sans TC"}},"\u65b0\u589e\u5716\u6587\u9078\u55ae"),l.a.createElement("p",{style:{fontFamily:"Noto Sans TC"}},"\u9700\u914d\u5408 Bot designer \u4f7f\u7528"),l.a.createElement("a",{href:"https://developers.line.biz/en/services/bot-designer/",rel:"noopener noreferrer",target:"_blank",title:"Bot designer \u4e0b\u8f09\u9023\u7d50"},"Bot designer \u4e0b\u8f09\u9023\u7d50"),l.a.createElement("br",null),l.a.createElement(j.a,{raised:!0},l.a.createElement(I.a,{as:"h3",style:{fontFamily:"Noto Sans TC"}},"\u5716\u6587\u9078\u55ae"),l.a.createElement(N.a,null),l.a.createElement("p",{style:{fontFamily:"Noto Sans TC"}},"1. \u4f7f\u7528 Bot designer \u8a2d\u8a08\u8981\u7528\u7684\u5716\u6587\u9078\u55ae"),l.a.createElement("p",{style:{fontFamily:"Noto Sans TC"}},"2. \u8907\u88fd\u8cbc\u4e0a Bot Designer \u7522\u751f\u7684\u7a0b\u5f0f"),l.a.createElement(_.a,{id:this.props.id,placeholder:{text:"\u8907\u88fd\u8cbc\u4e0a Bot Designer \u7522\u751f\u7684\u7a0b\u5f0f"},locale:T.a,height:"300px",onChange:r}),l.a.createElement("p",{style:{fontFamily:"Noto Sans TC"}},"3. \u9078\u64c7\u5716\u6587\u9078\u55ae\u7684\u80cc\u666f\u5716\u7247\uff08\u5fc5\u9808\u70ba 2500x1686 or 2500x843\uff09"),l.a.createElement("div",{style:{marginLeft:"8px"}},l.a.createElement(R.a,{multiple:!1,onDone:this.handleFileChange.bind(this)}),l.a.createElement(D.a,{src:o,style:{width:"50vw"}})),l.a.createElement("p",{style:{fontFamily:"Noto Sans TC"}},"4. \u5132\u5b58\u6539\u52d5"),l.a.createElement(B.a,{style:{color:"white",background:"#00B300",margin:"8px"},disabled:!t||!a,onClick:n,loading:this.state.isUploading},"\u5132\u5b58")))}}]),t}(n.Component),L=a(89),q=a(476),Q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onTypeChange=function(e,t){a.setState({type:t.value,file:{},fileUrl:"",filePreviewUrl:"",baseUrl:"",thumbHeight:""},function(){console.log(a.state.type)})},a.handleFileChange=function(e){if(console.log(JSON.stringify(e)),console.log("size:"+parseInt(e.size)),parseInt(e.size)<1e3)if(a.setState({file:e,fileUrl:"",filePreviewUrl:"",isUploading:!0}),"single"===a.state.type){var t=h.server+"/image_upload",n={binary:e.base64,folder_name:"image_single"};v.a.post(t,n,{headers:{"content-type":"application/json"}}).then(function(e){console.log("[sendUpdateRequest] success"),alert("\u6a94\u6848\u4e0a\u50b3\u6210\u529f\uff01"),a.setState({fileUrl:e.data.fileUrl,isUploading:!1})}).catch(function(e){console.log("[sendUpdateRequest] error"+e),alert("\u6a94\u6848\u4e0a\u50b3\u5931\u6557\uff0c\u932f\u8aa4\u8a0a\u606f\uff1a"+e)})}else if("image"===a.state.type){var l=h.server+"/image_msg_upload",r={binary:e.base64,folder_name:"image_message"};v.a.post(l,r,{headers:{"content-type":"application/json"}}).then(function(e){console.log("[sendUpdateRequest] success"),alert("\u6a94\u6848\u4e0a\u50b3\u6210\u529f\uff01"),a.setState({fileUrl:e.data.fileUrl,filePreviewUrl:e.data.filePreviewUrl,isUploading:!1})}).catch(function(e){console.log("[sendUpdateRequest] error"+e),alert("\u6a94\u6848\u4e0a\u50b3\u5931\u6557\uff0c\u932f\u8aa4\u8a0a\u606f\uff1a"+e)})}else if("imagemap"===a.state.type){var o=h.server+"/imagemap_image_upload",i={binary:e.base64,folder_name:"image_imagemap"};v.a.post(o,i,{headers:{"content-type":"application/json"}}).then(function(e){console.log("[sendUpdateRequest] success"),alert("\u6a94\u6848\u4e0a\u50b3\u6210\u529f\uff01"),a.setState({baseUrl:e.data.file_base_url,thumbHeight:e.data.thumb_height,isUploading:!1})}).catch(function(e){console.log("[sendUpdateRequest] error"+e),alert("\u6a94\u6848\u4e0a\u50b3\u5931\u6557\uff0c\u932f\u8aa4\u8a0a\u606f\uff1a"+e)})}},a.renderResult=function(){var e=a.state.type;return"single"===e?l.a.createElement("div",null,l.a.createElement(L.a,{style:{marginTop:"8px",marginRight:"8px"}},"fileUrl"),a.state.fileUrl):"image"===e?l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement(L.a,{style:{marginTop:"8px",marginRight:"8px"}},"fileUrl"),a.state.fileUrl),l.a.createElement("div",null,l.a.createElement(L.a,{style:{marginTop:"8px",marginRight:"8px"}},"filePreviewUrl"),a.state.filePreviewUrl)):"imagemap"===e?l.a.createElement("div",null,l.a.createElement(L.a,{style:{marginTop:"8px",marginRight:"8px"}},"baseUrl"),a.state.baseUrl):void 0},a.renderContent=function(){var e=a.state.file.hasOwnProperty("base64")?a.state.file.base64:"",t=a.state.isUploading,n=a.handleFileChange;return""===e?l.a.createElement(j.a,{placeholder:!0},l.a.createElement(R.a,{multiple:!1,onDone:n,style:{margin:"auto"}})):l.a.createElement(j.a,{placeholder:!0},l.a.createElement(D.a,{src:e,size:"medium"}),l.a.createElement(O.a,{active:t}))},a.renderMenu=function(){var e=a.onTypeChange;return l.a.createElement(j.a,null,l.a.createElement(q.a,{trigger:l.a.createElement(B.a,{icon:"image",value:"single",style:{background:"single"===a.state.type?"lightgray":"white"},onClick:e}),content:"\u55ae\u5f35\u5716\u7247",inverted:!0}),l.a.createElement(q.a,{trigger:l.a.createElement(B.a,{icon:"images",value:"image",style:{background:"image"===a.state.type?"lightgray":"white"},onClick:e}),content:"\u5716\u7247\u8a0a\u606f",inverted:!0}),l.a.createElement(q.a,{trigger:l.a.createElement(B.a,{icon:"block layout",value:"imagemap",style:{background:"imagemap"===a.state.type?"lightgray":"white"},onClick:e}),content:"\u5f71\u50cf\u5730\u5716",inverted:!0}))},a.state={type:"single",file:{},fileUrl:"",filePreviewUrl:"",baseUrl:"",thumbHeight:"",isUploading:!1},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.renderMenu,t=this.renderContent,a=this.renderResult;return l.a.createElement("div",null,l.a.createElement(I.a,{as:"h1",style:{fontFamily:"Noto Sans TC"}},this.props.title),l.a.createElement("p",{style:{fontFamily:"Noto Sans TC"}},"\u4e0a\u50b3\u5716\u7247\u7d66 Bot designer \u4f7f\u7528"),l.a.createElement(j.a,{raised:!0},l.a.createElement(j.a.Group,null,e(),t()),a()))}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onTypeChange=function(e,t){var n=t.value;a.setState({type:n,file:{},fileUrl:"",filePreviewUrl:"",baseUrl:"",thumbHeight:""},function(){console.log(a.state.type)})},a.handleFileChange=function(e){var t=e.target.files[0];console.log("size:"+parseInt(t.size)),a.setState({file:t,fileUrl:"",isUploading:!0});var n=h.server+"/upload",l=new FormData;l.append("file",t),v.a.post(n,l,{headers:{"content-type":"multipart/form-data"}}).then(function(e){console.log("[sendUpdateRequest] success"),alert("\u6a94\u6848\u4e0a\u50b3\u6210\u529f\uff01"),a.setState({fileUrl:e.data.fileUrl,isUploading:!1})}).catch(function(e){console.log("[sendUpdateRequest] error"+e),alert("\u6a94\u6848\u4e0a\u50b3\u5931\u6557\uff0c\u932f\u8aa4\u8a0a\u606f\uff1a"+e),a.setState({isUploading:!1})})},a.renderContent=function(){return l.a.createElement("div",null,l.a.createElement(L.a,{style:{marginTop:"8px",marginRight:"8px"}},"fileUrl"),a.state.fileUrl)},a.state={type:"video",file:{},fileUrl:"",isUploading:!1},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.isUploading,t=this.renderContent,a=this.handleFileChange;return l.a.createElement("div",null,l.a.createElement(I.a,{as:"h1",style:{fontFamily:"Noto Sans TC"}},this.props.title),l.a.createElement("p",{style:{fontFamily:"Noto Sans TC"}},"\u4e0a\u50b3\u5f71\u7247\u7d66 Bot designer \u4f7f\u7528"),l.a.createElement(j.a,{raised:!0},l.a.createElement(j.a.Group,null,l.a.createElement(j.a,null,l.a.createElement(q.a,{trigger:l.a.createElement(B.a,{icon:"video",value:"video",style:{background:"video"===this.state.type?"lightgray":"white"}}),content:"\u5f71\u7247",inverted:!0})),l.a.createElement(j.a,{placeholder:!0},l.a.createElement("input",{type:"file",onChange:a,accept:"video/mp4,video/x-m4v,video/*"}),l.a.createElement(O.a,{active:e}))),t()))}}]),t}(n.Component),H=a(471),K=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).queryRichMenuList=function(){a.setState({isLoading:!0});var e=h.server+"/default_rich_menu";v.a.get(e).then(function(e){console.log("[queryRichMenuList] success"),a.setState({defaultId:e.data.richMenuId},function(){var e=h.server+"/rich_menu_list";v.a.get(e).then(function(e){console.log("[queryRichMenuList] success"),a.setState({richmenus:e.data.richmenus,isLoading:!1})}).catch(function(e){console.log("[queryRichMenuList] error"+e)})})}).catch(function(e){console.log("[queryRichMenuList] error"+e)})},a.onDeleteClick=function(e){var t=h.server+"/delete_rich_menu",n={id:e};v.a.post(t,n,{headers:{"content-type":"application/json"}}).then(function(t){console.log("[onDeleteClick] success"),alert("\u522a\u9664\u5716\u6587\u9078\u55ae\u6210\u529f: "+e),a.queryRichMenuList()}).catch(function(e){console.log("[onDeleteClick] error"+e),alert("\u522a\u9664\u5716\u6587\u9078\u55ae\u5931\u6557\uff0c\u932f\u8aa4\u8a0a\u606f: "+e)})},a.booleanToString=function(e){return e?"\u662f":"\u5426"},a.renderDefaultLabel=function(e){if(e===a.state.defaultId)return l.a.createElement(L.a,{color:"green",horizontal:!0},"Default")},a.state={richmenus:[],defaultId:"",isLoading:!1},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.queryRichMenuList()}},{key:"render",value:function(){var e=this.state.isLoading,t=this.state.richmenus,a=this.renderDefaultLabel,n=this.booleanToString,r=this.onDeleteClick;return l.a.createElement("div",null,l.a.createElement(I.a,{as:"h1",style:{fontFamily:"Noto Sans TC"}},this.props.title),l.a.createElement(j.a,{raised:!0},l.a.createElement(H.a,{celled:!0,padded:!0},l.a.createElement(H.a.Header,null,l.a.createElement(H.a.Row,null,l.a.createElement(H.a.HeaderCell,{singleLine:!0,style:{fontFamily:"Noto Sans TC"}},"\u9078\u55ae\u540d\u7a31"),l.a.createElement(H.a.HeaderCell,{style:{fontFamily:"Noto Sans TC"}},"\u804a\u5929\u5217\u6a19\u984c"),l.a.createElement(H.a.HeaderCell,{style:{fontFamily:"Noto Sans TC"}},"\u552f\u4e00\u8b58\u5225\u78bc"),l.a.createElement(H.a.HeaderCell,{style:{fontFamily:"Noto Sans TC"}},"\u9810\u8a2d\u70ba\u986f\u793a"),l.a.createElement(H.a.HeaderCell,{style:{fontFamily:"Noto Sans TC"}},"\u64cd\u4f5c"))),l.a.createElement(H.a.Body,null,e&&l.a.createElement(H.a.Row,null,l.a.createElement(H.a.Cell,{colSpan:"5"},l.a.createElement(O.a,{active:!0,inline:"centered"}))),t.map(function(e,t){return l.a.createElement(H.a.Row,{key:e.richMenuId},l.a.createElement(H.a.Cell,null,l.a.createElement(I.a,{as:"h4",style:{fontFamily:"Noto Sans TC"}},e.name),a(e.richMenuId)),l.a.createElement(H.a.Cell,{singleLine:!0,style:{fontFamily:"Noto Sans TC"}},e.chatBarText),l.a.createElement(H.a.Cell,{singleLine:!0,style:{fontFamily:"Noto Sans TC"}},e.richMenuId),l.a.createElement(H.a.Cell,{singleLine:!0,style:{fontFamily:"Noto Sans TC"}},n(e.selected)),l.a.createElement(H.a.Cell,{textAlign:"center"},l.a.createElement(B.a,{style:{color:"white",background:"#d32f2f"},onClick:function(){return r(e.richMenuId)}},"\u522a\u9664")))})))))}}]),t}(n.Component),J=a(123),P=a(467),X=a(469),W=a(468),G=a(48),Y=a(233),V=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onTypeChange=function(e,t){a.setState({type:t.value},function(){console.log(a.state.type)})},a.handleDeleteClicked=function(e,t){var n=t.value;a.props.deleteCallback(a.props.id,n)},a.handleJSONChange=function(e){console.log("event"+JSON.stringify(e)),a.props.contentCallback(a.props.id,e)},a.handleFileChange=function(e){if(console.log(JSON.stringify(e)),console.log("size:"+parseInt(e.size)),parseInt(e.size)<1e3){if(a.setState({file:e,fileUrl:"",filePreviewUrl:"",isUploading:!0}),"image"===a.state.type){var t=h.server+"/image_msg_upload",n={binary:e.base64,folder_name:"image_message"};v.a.post(t,n,{headers:{"content-type":"application/json"}}).then(function(e){console.log("[sendUpdateRequest] success"),alert("\u6a94\u6848\u4e0a\u50b3\u6210\u529f\uff01"),a.setState({fileUrl:e.data.fileUrl,filePreviewUrl:e.data.filePreviewUrl,isUploading:!1},function(){var e={jsObject:{type:"image",originalContentUrl:a.state.fileUrl,previewImageUrl:a.state.filePreviewUrl,animated:!1},error:!1};a.props.contentCallback(a.props.id,e)})}).catch(function(e){console.log("[sendUpdateRequest] error"+e),alert("\u6a94\u6848\u4e0a\u50b3\u5931\u6557\uff0c\u932f\u8aa4\u8a0a\u606f\uff1a"+e),a.setState({isUploading:!1})})}}else alert("\u6a94\u6848\u8d85\u904e 1Mb!")},a.renderContent=function(){var e=a.state,t=e.type,n=e.isUploading,r=a.handleJSONChange,o=a.handleFileChange,i=a.props.defaultContent.type===a.state.type?a.props.defaultContent:{"\u8a0a\u606f\u5167\u5bb9":"\u8acb\u8cbc\u4e0a LINE Bot Designer \u7522\u751f\u7684\u8a0a\u606f"};if("image"===t){var s=a.state.file.hasOwnProperty("base64")?a.state.file.base64:a.props.defaultContent.hasOwnProperty("previewImageUrl")?a.props.defaultContent.previewImageUrl:"";return console.log("imgSrc"+s),""===s?l.a.createElement(j.a,{placeholder:!0},l.a.createElement(R.a,{multiple:!1,onDone:o,style:{margin:"auto"}})):l.a.createElement(j.a,{placeholder:!0},l.a.createElement(D.a,{src:s,size:"medium"}),l.a.createElement(O.a,{active:n}))}return l.a.createElement(j.a,{placeholder:!0},l.a.createElement("p",{style:{fontFamily:"Noto Sans TC",marginTop:"8px"}},"1. \u4f7f\u7528 Bot Designer \u8a2d\u8a08\u597d\u8a0a\u606f"),l.a.createElement("p",{style:{fontFamily:"Noto Sans TC",marginTop:"8px"}},"2. \u8907\u88fd\u8cbc\u4e0a Bot Designer \u7522\u751f\u7684\u7a0b\u5f0f"),l.a.createElement(_.a,{id:a.props.id,placeholder:i,locale:T.a,height:"150px",onChange:r}))},a.renderMenu=function(){var e=a.onTypeChange;return l.a.createElement(j.a,null,l.a.createElement(q.a,{trigger:l.a.createElement(B.a,{icon:"talk",value:"text",style:{background:"text"===a.state.type?"lightgray":"white"},onClick:e}),content:"\u6587\u5b57\u8a0a\u606f",inverted:!0}),l.a.createElement(q.a,{trigger:l.a.createElement(B.a,{icon:"picture",value:"image",style:{background:"image"===a.state.type?"lightgray":"white"},onClick:e}),content:"\u5716\u7247\u8a0a\u606f",inverted:!0}),l.a.createElement(q.a,{trigger:l.a.createElement(B.a,{icon:"external square alternate",value:"flex",style:{background:"flex"===a.state.type?"lightgray":"white"},onClick:e}),content:"\u5f48\u6027\u8a0a\u606f",inverted:!0}),l.a.createElement(q.a,{trigger:l.a.createElement(B.a,{icon:"block layout",value:"imagemap",style:{background:"imagemap"===a.state.type?"lightgray":"white"},onClick:e}),content:"\u5f71\u50cf\u5730\u5716",inverted:!0}),l.a.createElement(q.a,{trigger:l.a.createElement(B.a,{icon:"video",value:"video",style:{background:"video"===a.state.type?"lightgray":"white"},onClick:e}),content:"\u5f71\u7247\u8a0a\u606f",inverted:!0}),l.a.createElement(q.a,{trigger:l.a.createElement(B.a,{icon:"music",value:"audio",style:{background:"audio"===a.state.type?"lightgray":"white"},onClick:e}),content:"\u8a9e\u97f3\u8a0a\u606f",inverted:!0}),l.a.createElement(q.a,{trigger:l.a.createElement(B.a,{icon:"meh",value:"sticker",style:{background:"sticker"===a.state.type?"lightgray":"white"},onClick:e}),content:"\u8cbc\u5716\u8a0a\u606f",inverted:!0}),l.a.createElement(q.a,{trigger:l.a.createElement(B.a,{icon:"point",value:"location",style:{background:"location"===a.state.type?"lightgray":"white"},onClick:e}),content:"\u4f4d\u7f6e\u8a0a\u606f",inverted:!0}))},a.state={type:a.props.type||"",file:{},fileUrl:"",filePreviewUrl:"",fileBaseUrl:"",thumbHeight:"",isUploading:!1},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.renderMenu,t=this.renderContent;return l.a.createElement(j.a,{raised:!0},l.a.createElement(I.a,{as:"h3",style:{fontFamily:"Noto Sans TC"}},"\u8a0a\u606f#",this.props.idx+1,l.a.createElement(B.a,{floated:"right",style:{color:"white",background:"#d32f2f"},onClick:this.handleDeleteClicked},"\u522a\u9664")),l.a.createElement(j.a.Group,null,e(),t()))}}]),t}(n.Component),Z=5,$=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).queryKeywordReplyMsg=function(){var e=h.server+"/keywords";v.a.get(e).then(function(e){var t=e.data.find(function(e){return e._id===a.state.keywordObj._id});console.log("[queryKeywordReplyMsg] success"+JSON.stringify(e));for(var n=[],l=0;l<t.messages.length;l++){var r={_id:t.messages[l]._id,content:t.messages[l],editContent:""};n.push(r)}a.setState({messageArray:n})}).catch(function(e){console.log("[queryKeywordReplyMsg] error"+e)})},a.queryNoKeywordReplyMsg=function(){var e=h.server+"/no_keyword";console.log(),v.a.get(e).then(function(e){var t=e.data;console.log("[queryNoKeywordReplyMsg] success"+JSON.stringify(e.data));for(var n=[],l=0;l<t.length;l++){var r={_id:t[l]._id,content:t[l],editContent:""};n.push(r)}a.setState({messageArray:n})}).catch(function(e){console.log("[queryNoKeywordReplyMsg] error"+e)})},a.addReplyMsg=function(){if(a.state.messageArray.length<Z){var e={_id:(new Y.a).toHexString(),type:"text",text:""},t={_id:e._id,content:e,editContent:""};a.setState({messageArray:[].concat(Object(G.a)(a.state.messageArray),[t])},function(){console.log("add message: "+JSON.stringify(t))})}a.props.editCallback(!0,"add")},a.handleContentDelete=function(e){var t=Object(G.a)(a.state.messageArray),n=t.findIndex(function(t){return t._id===e});t.splice(n,1),a.setState({messageArray:Object(G.a)(t)},function(){console.log("Delete message id: "+e)}),a.props.editCallback(!0,"delete")},a.handleContentChange=function(e,t){var n=Object(G.a)(a.state.messageArray),l=n.findIndex(function(t){return t._id===e}),r=n.find(function(t){return t._id===e});r.editContent=t,n.splice(l,1,r),a.setState({messageArray:Object(G.a)(n)}),a.props.editCallback(!0,"update")},a.handleSaveClicked=function(){for(var e=!1,t=Object(G.a)(a.state.messageArray),n=[],l=0;l<a.state.messageArray.length;l++){var r=a.state.messageArray[l];""===r.editContent||(!1!==r.editContent.error?e=!0:(r.content=r.editContent.jsObject,t.splice(l,1,r))),n.push(r.content)}a.setState({hasAnyError:e,messageArray:t,isUploading:!0},function(){console.log("Check result has error: "+a.state.hasAnyError),console.log("query array: "+JSON.stringify(n)),a.state.hasAnyError?alert("\u8a0a\u606f\u683c\u5f0f\u932f\u8aa4\uff0c\u8acb\u5148\u4fee\u6b63\u518d\u5132\u5b58"):a.sendUpdateRequest(n)})},a.sendUpdateRequest=function(e){var t=h.server+"/update_keyword_msgs",n={_id:a.state.keywordObj._id,label:a.state.keywordObj.label,value:a.state.keywordObj.value,messages:e};v.a.post(t,n,{headers:{"content-type":"application/json"}}).then(function(e){console.log("[sendUpdateRequest] success"),alert("\u8a0a\u606f\u5132\u5b58\u6210\u529f\uff01"),a.setState({isUploading:!1})}).catch(function(e){console.log("[sendUpdateRequest] error"+e),alert("\u8a0a\u606f\u5132\u5b58\u5931\u6557\uff0c\u932f\u8aa4\u8a0a\u606f\uff1a"+e),a.setState({isUploading:!1})})},a.renderAddMessage=function(){if(a.state.messageArray.length<Z)return l.a.createElement(j.a,null,l.a.createElement(B.a,{fluid:!0,onClick:a.addReplyMsg},"\u9ede\u6211\u65b0\u589e\u56de\u61c9\u8a0a\u606f"))},a.state={keywordObj:a.props.keyword||{},messageArray:[],hasAnyError:!1,isUploading:!1},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.state.keywordObj.hasOwnProperty("_id")?this.queryKeywordReplyMsg():this.queryNoKeywordReplyMsg()}},{key:"render",value:function(){var e=this.state,t=e.keywordObj,a=e.messageArray,n=this.renderAddMessage,r=this.handleContentChange,o=this.handleContentDelete;return l.a.createElement("div",{style:{paddingBottom:"50px"}},l.a.createElement(I.a,{as:"h2",style:{fontFamily:"Noto Sans TC"}},t.label," (\u6700\u591a5\u5247\u8a0a\u606f)"),l.a.createElement("a",{href:"https://developers.line.biz/en/services/bot-designer/",rel:"noopener noreferrer",target:"_blank",title:"Bot designer \u4e0b\u8f09\u9023\u7d50"},"Bot designer \u4e0b\u8f09\u9023\u7d50"),a.map(function(e,t){return l.a.createElement(V,{key:t,id:e._id,idx:t,type:e.content.type,defaultContent:a[t].content,contentCallback:r,deleteCallback:o})}),n(),l.a.createElement(B.a,{floated:"left",style:{color:"white",background:"#00B300"},onClick:this.handleSaveClicked,loading:this.state.isUploading},"\u5132\u5b58"))}}]),t}(n.Component),ee=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).query_all_keyword=function(){a.setState({isLoading:!0});var e=h.server+"/keywords";v.a.get(e).then(function(e){console.log("[query_all_keyword] success"+JSON.stringify(e.data)),a.setState({keywordsArray:e.data,isLoading:!1})}).catch(function(e){console.log("[query_all_keyword] error"+e)})},a.keyword_add=function(){var e=a.query_all_keyword,t=h.server+"/keywords",n={label:a.state.newKeywordLabel,value:a.state.newKeywordValue,messages:[]};v.a.post(t,n,{headers:{"content-type":"application/json"}}).then(function(t){console.log("[keyword_add] success"),e(),a.setState({newKeywordLabel:"",newKeywordValue:""})}).catch(function(e){console.log("[keyword_add] error"+e)})},a.keyword_remove=function(e){var t=a.query_all_keyword;console.log("[keyword_remove] id: "+e);var n=h.server+"/delete_keywords",l={id:e};v.a.post(n,l,{headers:{"content-type":"application/json"}}).then(function(e){console.log("[keyword_remove] success"+e.data),t()}).catch(function(e){console.log("[keyword_remove] fail"+e)})},a.keyword_edit=function(e){e.isEdited=!1,a.setState({selectedKeyword:e,showModal:!0})},a.keyword_edit_close=function(){var e=a.state.selectedKeyword;console.log("isEdited"+e.isEdited),e.isEdited?a.setState({showConfirm:!0}):a.setState({selectedKeyword:{},showModal:!1})},a.handle_keyword_edited=function(e,t){a.state.selectedKeyword.isEdited=e},a.handleCancelAbort=function(){a.setState({showConfirm:!1})},a.handleConfirmAbort=function(){a.setState({showConfirm:!1,showModal:!1})},a.handleLabelChange=function(e,t){var n=t.value;a.setState({newKeywordLabel:n})},a.handleValueChange=function(e,t){var n=t.value;a.setState({newKeywordValue:n})},a.renderModal=function(e){var t=a.state,n=t.showModal,r=t.selectedKeyword,o=a.keyword_edit_close,i=a.handle_keyword_edited;if(n)return l.a.createElement(J.a,{centered:!1,closeOnDimmerClick:!1,open:n},l.a.createElement(J.a.Content,null,l.a.createElement(B.a,{floated:"right",color:"google plus",onClick:o},"X"),l.a.createElement($,{keyword:r,editCallback:i})))},a.renderConfirm=function(){var e=a.state.showConfirm,t=a.handleCancelAbort,n=a.handleConfirmAbort;if(e)return l.a.createElement(P.a,{open:e,content:"\u8981\u6368\u68c4\u672a\u5132\u5b58\u7684\u8b8a\u66f4\u55ce\uff1f",cancelButton:"\u53d6\u6d88",confirmButton:"\u78ba\u5b9a",onCancel:t,onConfirm:n})},a.state={keywordsArray:[],newKeywordLabel:"",newKeywordValue:"",isDeleting:!1,selectedKeyword:{},isLoading:!1,showModal:!1,showConfirm:!1,keywordEdited:!1},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.query_all_keyword()}},{key:"render",value:function(){var e=this.state,t=e.keywordsArray,a=e.newKeywordLabel,n=e.newKeywordValue,r=e.isLoading,o=this.keyword_remove,i=this.handleLabelChange,s=this.handleValueChange,c=this.keyword_edit,d=this.renderModal,u=this.renderConfirm;return l.a.createElement("div",null,l.a.createElement(I.a,{as:"h1",style:{fontFamily:"Noto Sans TC"}},this.props.title),l.a.createElement(j.a,{raised:!0},l.a.createElement(H.a,null,l.a.createElement(H.a.Header,null,l.a.createElement(H.a.Row,null,l.a.createElement(H.a.HeaderCell,{style:{fontFamily:"Noto Sans TC"},width:"6"},"\u6a19\u984c"),l.a.createElement(H.a.HeaderCell,{style:{fontFamily:"Noto Sans TC"},width:"6"},"\u95dc\u9375\u5b57"),l.a.createElement(H.a.HeaderCell,{style:{fontFamily:"Noto Sans TC"},width:"4"},"\u64cd\u4f5c"))),l.a.createElement(H.a.Body,null,r&&l.a.createElement(H.a.Row,null,l.a.createElement(H.a.Cell,{colSpan:"5"},l.a.createElement(O.a,{active:!0,inline:"centered"}))),t.map(function(e,t){return l.a.createElement(H.a.Row,{key:e._id},l.a.createElement(H.a.Cell,{singleLine:!0,style:{fontFamily:"Noto Sans TC"}},e.label),l.a.createElement(H.a.Cell,{singleLine:!0,style:{fontFamily:"Noto Sans TC"}},e.value),l.a.createElement(H.a.Cell,{textAlign:"center"},l.a.createElement(B.a,{floated:"right",color:"google plus",onClick:function(){return o(e._id)}},"\u522a\u9664"),l.a.createElement(B.a,{floated:"right",color:"vk",onClick:function(){return c(e)}},"\u7de8\u8f2f\u56de\u61c9"),d(e),u()))})),l.a.createElement(H.a.Footer,null,l.a.createElement(H.a.Row,null,l.a.createElement(H.a.HeaderCell,{colSpan:"3"},l.a.createElement(X.a,{onSubmit:this.keyword_add},l.a.createElement(X.a.Group,null,l.a.createElement(X.a.Field,{control:W.a,label:"\u6a19\u984c",placeholder:"\u6a19\u984c",value:a,onChange:i,width:"7"}),l.a.createElement(X.a.Field,{control:W.a,label:"\u95dc\u9375\u5b57",placeholder:"\u95dc\u9375\u5b57",value:n,onChange:s,width:"7"}),l.a.createElement(X.a.Field,{control:B.a,content:"\u65b0\u589e",label:"\u5132\u5b58\u65b0\u7684\u95dc\u9375\u5b57",style:{color:"white",background:"#00B300"},width:"2",floated:"right",fluid:!0})))))))))}}]),t}(n.Component),te=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).query_all_no_keyword=function(){a.setState({isLoading:!0});var e=h.server+"/no_keyword";v.a.get(e).then(function(e){console.log("[query_all_no_keyword] success"+JSON.stringify(e.data)),a.setState({messageArray:e.data,isLoading:!1})}).catch(function(e){console.log("[query_all_no_keyword] error"+e)})},a.state={messageArray:[],isLoading:!1},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.query_all_no_keyword()}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(I.a,{as:"h1",style:{fontFamily:"Noto Sans TC"}},this.props.title),l.a.createElement(j.a,{raised:!0},l.a.createElement($,{editCallback:function(){}})))}}]),t}(n.Component),ae={apiKey:"AIzaSyA3vtWAH1U34t9lpYDP6dPctIe9xTNfUM8",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/analytics/v3/rest","https://www.googleapis.com/auth/analytics","https://www.googleapis.com/auth/analytics.readonly","https://www.googleapis.com/auth/analytics.manage.users.readonly"],clientId:"457436541637-fhgcnaa1isef6c66ettqgk0n5762k8ni.apps.googleusercontent.com",scope:"profile https://www.googleapis.com/auth/analytics"},ne=a(250),le=a.n(ne),re=a(251),oe=a.n(re),ie=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).loadAndInitGAPI=function(){var e=a.queryAnalyticsData;return new Promise(function(t,a){var n=document.createElement("script");n.type="text/javascript",n.src="https://apis.google.com/js/api.js",n.onload=function(t){window.gapi.load("client",function(){console.log("Google client ready"),window.gapi.client.setApiKey(ae.apiKey),window.gapi.auth2.init({clientId:ae.clientId,discoveryDocs:ae.discoveryDocs,scope:ae.scope}).then(function(){console.log("Google Auth 2 inited"),window.gapi.auth2.getAuthInstance().signIn().then(function(){console.log("Google Auth 2 inited");for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];window.gapi.client.setToken({access_token:a[0].Zi.access_token}),window.gapi.client.load("analytics","v3",function(){console.log("Analytics API ready"),e()})})})})},document.getElementsByTagName("head")[0].appendChild(n)})},a.queryAnalyticsData=function(){var e=a.state.duration,t=a.getDateString,n=a.handleAnalyticsData,l=new Date((new Date).setDate((new Date).getDate()-e)),r=new Date,o="https://www.googleapis.com/analytics/v3/data/ga?ids=ga%3A193440673&start-date="+t(l)+"&end-date="+t(r)+"&metrics=ga%3Apageviews%2Cga%3AuniquePageviews&dimensions=ga%3ApagePath%2Cga%3Adate";a.setState({isLoading:!0}),window.gapi.client.request({path:o}).then(function(){for(var e=arguments.length,t=new Array(e),l=0;l<e;l++)t[l]=arguments[l];console.log("Analytics data: "+JSON.stringify(t)),a.setState({queryData:t[0].result,isLoading:!1},function(){n(t[0].result)})})},a.getDateString=function(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")},a.getDataIdxFromString=function(e){var t=a.state.duration,n=parseInt(e.substring(0,4)),l=parseInt(e.substring(4,6)),r=parseInt(e.substring(6,8)),o=new Date(n,l,r),i=new Date((new Date).setDate((new Date).getDate()-t)),s=(o-new Date(i.getFullYear(),i.getMonth()+1,i.getDate()))/864e5;return console.log("diff: "+s),s},a.setXAxisLabel=function(){for(var e=a.state.duration,t=new Date((new Date).setDate((new Date).getDate()-e)),n=[],l=0;l<a.state.duration;l++){var r=new Date((new Date).setDate(t.getDate()+l)),o=r.getFullYear().toString()+"/"+(r.getMonth()+1).toString()+"/"+r.getDate().toString();n.push(o)}a.setState({xAxis:n})},a.handleAnalyticsData=function(e){var t=a.state,n=t.duration,l=t.countType,r=a.getDataIdxFromString,o=a.setXAxisLabel,i=a.getTotalNum;if(e.hasOwnProperty("rows")){var s=e.rows;console.log("data array: "+JSON.stringify(s)),o(),i();var c=[];s.forEach(function(e,t){console.log("data: "+JSON.stringify(e));var a=e[0],o=e[1],i="pageviews"===l?parseInt(e[2]):parseInt(e[3]);if(-1===c.findIndex(function(e){return e.name===a})){console.log("series not found, create one");var s={};s.name=a,s.data=new Array(n).fill(0),c=[].concat(Object(G.a)(c),[s])}else console.log("series found");var d=r(o),u=c.findIndex(function(e){return e.name===a});-1===u?console.log("series not found..."):c[u].data[d]=i}),a.setState({chartData:c})}else alert("\u6c92\u6709\u8cc7\u6599")},a.handleDurationChange=function(e,t){var n=a.queryAnalyticsData;a.setState({queryData:{},chartData:[],duration:t.value},function(){n()})},a.handleCountTypeChange=function(e,t){var n=a.state,l=n.queryData,r=(n.duration,a.handleAnalyticsData);a.setState({chartData:[],countType:t.value},function(){r(l)})},a.getTitle=function(){return"pageviews"===a.state.countType?"\u7e3d\u700f\u89bd\u91cf":"\u4e0d\u91cd\u8907\u700f\u89bd\u91cf"},a.getTotalNum=function(){var e=a.state,t=e.queryData,n=e.total;return t.hasOwnProperty("totalsForAllResults")&&a.setState({total:"pageviews"===a.state.countType?t.totalsForAllResults["ga:pageviews"]:t.totalsForAllResults["ga:uniquePageviews"]}),n.toString()},a.state={queryData:{},chartData:[],xAxis:[],duration:28,total:0,countType:"pageviews",isLoading:!1},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.loadAndInitGAPI()}},{key:"render",value:function(){var e=this.state,t=e.chartData,a=e.duration,n=e.countType,r=e.isLoading,o=e.xAxis,i=e.total,s=this.handleDurationChange,c=this.handleCountTypeChange,d=this.getTitle,u={chart:{type:"line"},title:{text:"LINE@ \u6d41\u91cf\u7d71\u8a08"},xAxis:{categories:o},series:t},g=function(e,t){return e+t};return l.a.createElement("div",null,l.a.createElement(I.a,{as:"h1",style:{fontFamily:"Noto Sans TC"}},this.props.title),l.a.createElement("a",{href:"https://analytics.google.com/analytics/web/#/report-home/a138277882w198888686p193440673",rel:"noopener noreferrer",target:"_blank",title:"Google Analytics"},"Google Analytics"),l.a.createElement(j.a,{raised:!0},l.a.createElement(B.a.Group,null,l.a.createElement(B.a,{style:{background:"pageviews"===n?"#00B300":"lightgray",color:"pageviews"===n?"white":"gray",fontWeight:"normal"},value:"pageviews",onClick:c},"\u7e3d\u700f\u89bd\u91cf"),l.a.createElement(B.a.Or,null),l.a.createElement(B.a,{style:{background:"uniquePageviews"===n?"#00B300":"lightgray",color:"uniquePageviews"===n?"white":"gray",fontWeight:"normal"},value:"uniquePageviews",onClick:c},"\u4e0d\u91cd\u8907\u700f\u89bd\u91cf")),l.a.createElement(B.a.Group,{style:{float:"right"}},l.a.createElement(B.a,{style:{background:1===a?"#00B300":"lightgray",color:1===a?"white":"gray",fontWeight:"normal"},value:1,onClick:s},"\u5929"),l.a.createElement(B.a,{style:{background:7===a?"#00B300":"lightgray",color:7===a?"white":"gray",fontWeight:"normal"},value:7,onClick:s},"\u9031"),l.a.createElement(B.a,{style:{background:28===a?"#00B300":"lightgray",color:28===a?"white":"gray",fontWeight:"normal"},value:28,onClick:s},"\u6708")),l.a.createElement(oe.a,{highcharts:le.a,options:u}),l.a.createElement(H.a,null,l.a.createElement(H.a.Header,null,l.a.createElement(H.a.Row,null,l.a.createElement(H.a.HeaderCell,{style:{fontFamily:"Noto Sans TC"}},"\u529f\u80fd"),l.a.createElement(H.a.HeaderCell,{style:{fontFamily:"Noto Sans TC"}},d()),l.a.createElement(H.a.HeaderCell,{style:{fontFamily:"Noto Sans TC"}},"\u767e\u5206\u6bd4"))),l.a.createElement(H.a.Body,null,r&&l.a.createElement(H.a.Row,null,l.a.createElement(H.a.Cell,{colSpan:"2"},l.a.createElement(O.a,{active:!0,inline:"centered"}))),!r&&l.a.createElement(H.a.Row,null,l.a.createElement(H.a.Cell,{singleLine:!0}),l.a.createElement(H.a.Cell,{style:{fontFamily:"Noto Sans TC"}},l.a.createElement(I.a,null,i),l.a.createElement(I.a.Subheader,null,"\u6642\u9593\u5167\u7684\u7e3d\u700f\u89bd\u91cf")),l.a.createElement(H.a.Cell,{style:{fontFamily:"Noto Sans TC"}},l.a.createElement(I.a,null,"100.00%"),l.a.createElement(I.a.Subheader,null,"\u7e3d\u767e\u5206\u6bd4"))),t.map(function(e,t){var a=e.data.reduce(g);return l.a.createElement(H.a.Row,{key:t},l.a.createElement(H.a.Cell,{singleLine:!0,style:{fontFamily:"Noto Sans TC"}},e.name),l.a.createElement(H.a.Cell,{singleLine:!0,style:{fontFamily:"Noto Sans TC"}},a),l.a.createElement(H.a.Cell,{singleLine:!0,style:{fontFamily:"Noto Sans TC"}},(a/i*100).toFixed(2),"%"))})))))}}]),t}(n.Component),se=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleLoginClicked=function(){var e="https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id="+h.line_login_id+"&redirect_uri="+h.homepage+"&state=access&scope=openid%20profile&nonce=54321&max_age="+1800..toString();window.location.href=e},a.handleItemClick=function(e,t){var n=t.name,l=t.value;a.setState({activeItem:l,activeItemName:n})},a.renderBodyContent=function(){var e=a.state,t=e.activeItem,n=e.activeItemName;return"rich_menu"===t?l.a.createElement(M,null):"image_upload"===t?l.a.createElement(Q,{title:n}):"video_upload"===t?l.a.createElement(z,{title:n}):"manage_richmenu"===t?l.a.createElement(K,{title:n}):"manage_keyword"===t?l.a.createElement(ee,{title:n}):"manage_no_keyword"===t?l.a.createElement(te,{title:n}):"analytics"===t?l.a.createElement(ie,{title:n}):void 0},a.renderBody=function(){var e=a.state.activeItem,t=a.state.hasSendRequest,n=a.state.hasLoggedIn,r=a.renderBodyContent;return t&&n?l.a.createElement(S.a.Row,{columns:2,style:{padding:"0px",height:"90vh"}},l.a.createElement(S.a.Column,{width:3,style:{background:"#f3f3f3"}},l.a.createElement(U.a,{fluid:!0,vertical:!0,tabular:!0,style:{fontFamily:"Noto Sans TC",fontSize:20},color:"green"},l.a.createElement(U.a.Item,null,l.a.createElement(U.a.Header,{style:{fontSize:24}},"\u5716\u6587\u9078\u55ae"),l.a.createElement(U.a.Menu,null,l.a.createElement(U.a.Item,{name:"\u65b0\u589e\u5716\u6587\u9078\u55ae",active:"rich_menu"===e,value:"rich_menu",onClick:a.handleItemClick}),l.a.createElement(U.a.Item,{name:"\u7ba1\u7406\u5716\u6587\u9078\u55ae",active:"manage_richmenu"===e,value:"manage_richmenu",onClick:a.handleItemClick}),l.a.createElement(U.a.Item,{name:"\u95dc\u9375\u5b57\u81ea\u52d5\u56de\u61c9",active:"manage_keyword"===e,value:"manage_keyword",onClick:a.handleItemClick}),l.a.createElement(U.a.Item,{name:"\u6c92\u6709\u95dc\u9375\u5b57\u7684\u56de\u61c9",active:"manage_no_keyword"===e,value:"manage_no_keyword",onClick:a.handleItemClick}))),l.a.createElement(U.a.Item,null,l.a.createElement(U.a.Header,{style:{fontSize:24}},"\u5c0f\u5de5\u5177"),l.a.createElement(U.a.Menu,null,l.a.createElement(U.a.Item,{name:"\u4e0a\u50b3\u5716\u7247",active:"image_upload"===e,value:"image_upload",onClick:a.handleItemClick}),l.a.createElement(U.a.Item,{name:"\u4e0a\u50b3\u5f71\u7247",active:"video_upload"===e,value:"video_upload",onClick:a.handleItemClick}),l.a.createElement(U.a.Item,{name:"\u6d41\u91cf\u5206\u6790",active:"analytics"===e,value:"analytics",onClick:a.handleItemClick}))))),l.a.createElement(S.a.Column,{stretched:!0,width:12,style:{paddingTop:"8px"}},r())):t&&!n?l.a.createElement(O.a,{active:!0,inline:"centered"}):l.a.createElement(I.a,{as:"H1",style:{color:"#484848",margin:"auto",fontFamily:"Noto Sans TC"}},"\u8acb\u5148\u767b\u5165")},a.state={activeItem:"manage_keyword",activeItemName:"\u95dc\u9375\u5b57\u81ea\u52d5\u56de\u61c9",hasSendRequest:!1,hasLoggedIn:!1,userId:"",userName:"\u5c1a\u672a\u767b\u5165",userImageUrl:k.a},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=p.a.parse(this.props.location.search),a=t.code,n=t.state;if(console.log("code: "+a+"\nstate: "+n),void 0!==a){this.setState({hasSendRequest:!0});var l=h.server+"/login",r={code:a,state:n};v.a.post(l,r,{"Content-Type":"application/json"}).then(function(t){var a=C()(t.data.id_token);console.log("[login]\ndecode: "+JSON.stringify(a)),console.log("[login]\nuser id: "+a.sub+"\nuser name: "+a.name+"\nuser image url: "+a.picture),v.a.defaults.headers.common.Authorization="Bearer "+t.data.id_token,e.setState({userId:a.sub||"",userName:a.name||"",userImageUrl:a.picture||""},function(){var t=h.server+"/admins",a=e.state.userId;v.a.get(t).then(function(t){console.log("[get admins] success"+JSON.stringify(t)),void 0===t.data[0].admins.find(function(e){return e===a})?(alert("\u6c92\u6709\u4f7f\u7528\u6b0a\u9650"),e.setState({hasSendRequest:!1})):(alert("\u6b61\u8fce\u767b\u5165\uff0c"+e.state.userName),e.setState({hasLoggedIn:!0}))}).catch(function(e){console.log("[get admins] error"+e)})})}).catch(function(e){console.log("[login] error"+e)})}}},{key:"render",value:function(){var e=this.renderBody,t=this.state.userName,a=this.state.userImageUrl;return l.a.createElement(S.a,null,l.a.createElement(S.a.Row,{columns:1,style:{padding:"0px"}},l.a.createElement(j.a,{raised:!0,style:{background:"#37474f",margin:"0px",flex:1}},l.a.createElement("div",{style:{flexDirection:"row",display:"flex"}},l.a.createElement(D.a,{style:{height:"52px",width:"52px"},src:A.a}),l.a.createElement(I.a,{as:"h1",style:{color:"white",margin:"0px",padding:"8px",flex:1,fontFamily:"Noto Sans TC"}},"\u5d07\u4fe1\u6559\u6703LINE@\u8a2d\u5b9a\u9801"),l.a.createElement(D.a,{avatar:!0,src:a,style:{width:"52px",height:"52px",padding:"8px"}}),l.a.createElement(I.a,{as:"h1",style:{color:"white",margin:"0px",minWidth:"100px",padding:"8px",fontFamily:"Noto Sans TC"}},t),l.a.createElement(B.a,{floated:"right",style:{color:"white",background:"#00B300",margin:"8px"},onClick:this.handleLoginClicked},"LINE LOGIN")))),e())}}]),t}(n.Component),ce=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(g.a,null,l.a.createElement(m.a,{path:"/:code?/:state?",component:se,exact:!0}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var de=a(470);a(456);o.a.render(l.a.createElement(de.a,null,l.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[265,1,2]]]);
//# sourceMappingURL=main.383259ac.chunk.js.map